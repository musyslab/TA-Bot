/* PlagiarismCompare.scss */

/* Root layout container */
.plagiarism-container {

  /* Back button (top-left) */
  .back-btn {
    width: 90vw;
    margin: 0 auto 0;
    display: flex;
    justify-content: flex-start;

    .back-link {
      background: transparent;
      border: none;
      color: #007bff;
      font-size: 1.1rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      cursor: pointer;
      text-decoration: none;
      transition: color 0.2s ease;
      margin-top: 125px;

      &:hover {
        color: #0056b3;
        text-decoration: none;
      }

      &:focus-visible {
        outline: 2px solid #93c5fd;
        outline-offset: 2px;
        border-radius: 6px;
      }
    }
  }

  /* Title bar */
  .title-outline {
    width: 90vw;
    margin-top: 20px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 30px;

    .title-text {
      width: 100%;
      text-align: center;
      background: #d1d5db;
      border: 1px solid #9ca3af;
      border-radius: 12px;
      padding: 1.1rem 1.25rem;
      font-weight: 700;
      font-size: 1.45rem;
      line-height: 1.2;
      margin: 0;
    }
  }

  /* Similarity Finder toolbar */
  .sim-toolbar {
    width: 90vw;
    margin: 8px auto 16px;
    position: sticky;
    top: 8px;
    z-index: 5;
    display: flex;
    gap: 10px;
    align-items: center;
    justify-content: flex-start;
    padding: 8px 10px;
    backdrop-filter: saturate(140%) blur(6px);
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.65));
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    box-shadow: 0 1px 2px rgba(2, 8, 23, 0.06);

    /* Button base */
    .btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 0.55rem;
      padding: 0.62rem 1rem 0.62rem 0.9rem;
      border-radius: 999px;
      border: 1px solid #9ca3af;
      background: #f9fafb;
      color: #111827;
      font-weight: 700;
      font-size: 0.95rem;
      line-height: 1;
      cursor: pointer;
      transition:
        background 120ms ease,
        border-color 120ms ease,
        color 120ms ease,
        box-shadow 120ms ease,
        transform 40ms ease;

      .btn-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      &::before {
        content: "";
        width: 10px;
        height: 10px;
        border-radius: 999px;
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.15);
        background: #9ca3af;
      }

      &:active {
        transform: translateY(1px);
      }

      &:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }
    }

    /* Similarity toggle (orange accent when on) */
    .toggle-sim {
      &.off:hover {
        background: #e5e7eb;
        border-color: #4b5563;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      }

      &.on {
        color: #1f2937;
        background: #fff7ed;
        border-color: #f59e0b;

        &::before {
          background: #f59e0b;
          box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.16);
        }

        &:hover {
          background: #ffedd5;
        }
      }
    }

    /* Layout toggle (blue accent when stacked) */
    .toggle-layout {

      &::before {
        content: none;
        display: none;
      }

      &.side {
        color: #1f2937;
        background: #f5f3ff;
        border-color: #8b5cf6;
      }

      &.side:hover {
        background: #ede9fe;
      }


      &.stacked {
        color: #1f2937;
        background: #eff6ff;
        border-color: #3b82f6;

        &:hover {
          background: #dbeafe;
        }
      }
    }
  }

  /* Messages */
  .no-data-message {
    width: 90vw;
    margin: 16px auto;
    padding: 12px 16px;
    border: 1px solid #e2e8f0;
    background: #f8fafc;
    border-radius: 10px;
    font-size: 14px;
    color: #0f172a;
    box-shadow: 0 1px 2px rgba(2, 8, 23, 0.06);
  }

  /* Headings per side */
  .section-title {
    width: 100%;
    margin: 0 0 10px;
    font-size: 18px;
    font-weight: 700;
    color: #0f172a;
    letter-spacing: 0.2px;
    position: sticky;
    top: 62px;
    /* below the toolbar */
    z-index: 3;
    background: linear-gradient(to bottom, #ffffff, rgba(255, 255, 255, 0.85));
    backdrop-filter: blur(2px);
    border-bottom: 1px solid #e2e8f0;
    padding: 6px 6px 8px 4px;
  }

  /* Panels grid with mode classes */
  .panels {
    width: 90vw;
    margin: 0 auto 24px;
    display: grid;
    gap: 24px;
    align-items: stretch;
    /* ensure both columns align vertically */

    &.side {
      grid-template-columns: 1fr 1fr;
    }

    &.stacked {
      grid-template-columns: 1fr;
    }
  }

  /* IMPORTANT: allow horizontal scrolling inside each column instead of forcing page overflow */
  .panels>div {
    min-width: 0;
    /* grid items default to min-width:auto which can break inner overflow */
    display: flex;
    flex-direction: column;
  }

  /* Code panel */
  .code-block.code-viewer {
    border: 1px solid #e2e8f0;
    background: #ffffff;
    border-radius: 10px;
    box-shadow: 0 1px 2px rgba(2, 8, 23, 0.06);
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;

    /* Scrolling behavior */
    overflow-x: auto;
    /* horizontal scrollbar when needed */
    overflow-y: auto;
    max-height: 75vh;
    padding: 8px 0;

    /* keep layout stable when scrollbars appear so both boxes stay aligned */
    @supports (scrollbar-gutter: stable) {
      scrollbar-gutter: stable both-edges;
    }

    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;

    background-image: linear-gradient(to bottom, rgba(2, 8, 23, 0.03), rgba(2, 8, 23, 0) 40%),
    linear-gradient(to right, rgba(0, 0, 0, 0.02), rgba(0, 0, 0, 0));

    scroll-snap-type: y proximity;
  }

  /* Ordered list holding lines */
  .code-list {
    list-style: none;
    margin: 0;
    padding: 0;
    font-size: 13.5px;
    line-height: 1.5;
    white-space: pre;
    /* prevent wrapping so long lines can scroll horizontally */
    min-width: 100%;
    width: max-content;
    /* expand to content width to enable horizontal scroll */
    tab-size: 4;
    counter-reset: line;
  }

  /* Individual line: gutter + code text */
  .code-line {
    display: flex;
    align-items: stretch;
    min-height: 20px;
    scroll-snap-align: start;
    transition: background-color 120ms ease;

    &:nth-child(2n) {
      background: #f8fafc;
    }

    &:hover {
      background: #eef2f7;
    }
  }

  /* Gutter with line numbers */
  .gutter {
    padding: 0 8px 0 10px;
    border-right: 1px solid #e2e8f0;
    text-align: right;
    user-select: none;
    color: #64748b;
    background: linear-gradient(to bottom, rgba(148, 163, 184, 0.06), rgba(148, 163, 184, 0));
    position: sticky;
    left: 0;
    z-index: 2;
    backdrop-filter: blur(2px);

    .line-number {
      display: inline-block;
      letter-spacing: 0.2px;
    }
  }

  /* Code text area */
  .code-text {
    flex: 1 1 auto;
    padding: 0 12px;
    color: #0f172a;
    overflow-wrap: normal;
    word-break: normal;
    white-space: inherit;

    .similar-ch {
      padding: 0 0.08rem;
      border-radius: 3px;
      background: linear-gradient(180deg, rgba(245, 158, 11, 0.28), rgba(245, 158, 11, 0.38));
      box-shadow:
        inset 0 0 0 1px #f59e0b,
        0 0 0 2px rgba(245, 158, 11, 0.12);
      display: inline-block;
      line-height: inherit;
      position: relative;
      z-index: 0;
      white-space: inherit;
      text-decoration-skip-ink: auto;

      &::after {
        content: "";
        position: absolute;
        left: 0.06rem;
        right: 0.06rem;
        bottom: 0.08em;
        height: 1px;
        background: rgba(245, 158, 11, 0.75);
        opacity: 0.55;
        pointer-events: none;
      }
    }
  }
}